{"version":3,"file":"index.mjs","sources":["../src/modules/bullion.js","../src/modules/nepse.js","../src/modules/vegetable.js","../src/schemas/index.js","../src/schemas/bullion.js","../src/schemas/nepse.js","../src/schemas/vegetable.js","../src/utils/apiService.js","../src/index.js"],"sourcesContent":["class Bullion {\r\n  constructor(cfg) {\r\n    Object.assign(this, cfg);\r\n  }\r\n\r\n  async get(symbol) {\r\n    if (!symbol) return this.service.get(\"/bullion/current\");\r\n    else return this.service.get(\"/bullion/\" + symbol);\r\n  }\r\n}\r\n\r\nexport default Bullion;\r\n","class Nepse {\r\n  constructor(cfg) {\r\n    Object.assign(this, cfg);\r\n  }\r\n}\r\n\r\nexport default Nepse;\r\n","class Vegetable {\r\n  constructor(cfg) {\r\n    Object.assign(this, cfg);\r\n  }\r\n}\r\n\r\nexport default Vegetable;\r\n","import Bullion from \"./bullion\";\r\nimport Nepse from \"./nepse\";\r\nimport Vegetable from \"./vegetable\";\r\n\r\nexport default {\r\n  Bullion,\r\n  Nepse,\r\n  Vegetable\r\n};\r\n","export default {\r\n  symbol: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  date: {\r\n    type: Date,\r\n    required: true\r\n  },\r\n  price: {\r\n    type: Number,\r\n    required: true\r\n  }\r\n};\r\n","export default {\r\n  symbol: {\r\n    type: String,\r\n    unique: true,\r\n    required: true\r\n  },\r\n  name: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  date: {\r\n    type: Date,\r\n    required: true\r\n  },\r\n  close: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  volume: Number,\r\n  transaction_count: Number,\r\n  transaction_amount: Number,\r\n  maximum: Number,\r\n  minimum: Number,\r\n  previous_close: Number\r\n};\r\n","export default {\r\n  name: {\r\n    type: String,\r\n    required: true,\r\n    unique: true\r\n  },\r\n  group: String,\r\n  unit: String,\r\n  min: Number,\r\n  max: Number,\r\n  price: { type: Number, required: true }\r\n};\r\n","//import fetch from \"node-fetch\";\r\nconst fetch = require(\"node-fetch\");\r\n\r\nclass APIService {\r\n  constructor(cfg) {\r\n    let config = Object.assign({}, cfg);\r\n    Object.assign(this, config);\r\n    this.debugMode = this.debugMode || false;\r\n  }\r\n\r\n  async request(options) {\r\n    if (typeof options == \"string\") options = { path: options };\r\n    const url = options.url || `${this.url}${options.path}`;\r\n    if (options.body) options.body = JSON.stringify(options.body);\r\n\r\n    options.method = options.method || \"GET\";\r\n    options.useAccessToken = options.useAccessToken || true;\r\n    options.headers = options.headers || {};\r\n\r\n    options.headers[\"content-type\"] = \"application/json\";\r\n    //if (options.useAccessToken)\r\n    //  options.headers[\"access_token\"] = localStorage.getItem(\"access_token\");\r\n\r\n    let res = await fetch(url, options);\r\n    if (!res.ok) return this.badResponse(res);\r\n    let json = await res.json();\r\n    return json;\r\n  }\r\n\r\n  get(options) {\r\n    if (typeof options == \"string\") options = { path: options };\r\n    return this.request(options);\r\n  }\r\n\r\n  post(options) {\r\n    options.method = \"POST\";\r\n    return this.request(options);\r\n  }\r\n\r\n  put(options) {\r\n    options.method = \"PUT\";\r\n    return this.request(options);\r\n  }\r\n\r\n  delete(options) {\r\n    if (typeof options == \"string\") options = { path: options };\r\n    options.method = \"DELETE\";\r\n    return this.request(options);\r\n  }\r\n\r\n  patch(options) {\r\n    options.method = \"PATCH\";\r\n    return this.request(options);\r\n  }\r\n\r\n  notImplemented(name) {\r\n    Notify.warning(`${name} is not implemented`);\r\n  }\r\n\r\n  async badResponse(res) {\r\n    console.log(res);\r\n    let message = res.statusText;\r\n    //throw Error(message);\r\n  }\r\n}\r\n\r\nexport default APIService;\r\n","import bullion from \"./modules/bullion\";\r\nimport nepse from \"./modules/nepse\";\r\nimport vegetable from \"./modules/vegetable\";\r\n\r\nimport schemas from \"./schemas\";\r\nimport ApiService from \"./utils/apiService\";\r\n\r\nclass client {\r\n  constructor(config) {\r\n    const service = new ApiService({\r\n      url: config.endpoint\r\n    });\r\n\r\n    let cfg = { service };\r\n\r\n    this.Bullion = new bullion(cfg);\r\n    this.Nepse = new nepse(cfg);\r\n    this.Vegetable = new vegetable(cfg);\r\n  }\r\n}\r\n\r\nexport const Schemas = schemas;\r\n\r\nexport const Client = client;\r\n"],"names":["Bullion","constructor","cfg","Object","assign","this","get","symbol","service","Nepse","Vegetable","type","String","required","date","Date","price","Number","unique","name","close","volume","transaction_count","transaction_amount","maximum","minimum","previous_close","group","unit","min","max","fetch","require","APIService","config","debugMode","request","options","path","url","_this","body","JSON","stringify","method","useAccessToken","headers","res","ok","json","badResponse","post","put","delete","patch","notImplemented","Notify","warning","console","log","Schemas","schemas","Client","ApiService","endpoint","bullion","nepse","vegetable"],"mappings":"AAAA,IAAMA,EACJC,SAAYC,GACVC,OAAOC,OAAOC,KAAMH,gBAGhBI,aAAIC,cACHA,kBAAeF,KACHG,QAAQF,IAAI,YAAcC,oBADvBF,KAAKG,QAAQF,IAAI,yDCNzC,IAAMG,EACJR,SAAYC,GACVC,OAAOC,OAAOC,KAAMH,ICFlBQ,EACJT,SAAYC,GACVC,OAAOC,OAAOC,KAAMH,MCET,SCJA,CACbK,OAAQ,CACNI,KAAMC,OACNC,UAAU,GAEZC,KAAM,CACJH,KAAMI,KACNF,UAAU,GAEZG,MAAO,CACLL,KAAMM,OACNJ,UAAU,UCXC,CACbN,OAAQ,CACNI,KAAMC,OACNM,QAAQ,EACRL,UAAU,GAEZM,KAAM,CACJR,KAAMC,OACNC,UAAU,GAEZC,KAAM,CACJH,KAAMI,KACNF,UAAU,GAEZO,MAAO,CACLT,KAAMM,OACNJ,UAAU,GAEZQ,OAAQJ,OACRK,kBAAmBL,OACnBM,mBAAoBN,OACpBO,QAASP,OACTQ,QAASR,OACTS,eAAgBT,kBCvBH,CACbE,KAAM,CACJR,KAAMC,OACNC,UAAU,EACVK,QAAQ,GAEVS,MAAOf,OACPgB,KAAMhB,OACNiB,IAAKZ,OACLa,IAAKb,OACLD,MAAO,CAAEL,KAAMM,OAAQJ,UAAU,KCT7BkB,EAAQC,QAAQ,cAEhBC,EACJhC,SAAYC,OACNgC,EAAS/B,OAAOC,OAAO,GAAIF,GAC/BC,OAAOC,OAAOC,KAAM6B,QACfC,UAAY9B,KAAK8B,YAAa,eAG/BC,iBAAQC,aAEkBhC,KADR,iBAAXgC,IAAqBA,EAAU,CAAEC,KAAMD,QAC5CE,EAAMF,EAAQE,QAAUC,MAAWH,cACrCA,EAAQI,OAAMJ,EAAQI,KAAOC,KAAKC,UAAUN,EAAQI,OAExDJ,EAAQO,OAASP,EAAQO,QAAU,MACnCP,EAAQQ,eAAiBR,EAAQQ,iBAAkB,EACnDR,EAAQS,QAAUT,EAAQS,SAAW,GAErCT,EAAQS,QAAQ,gBAAkB,mCAIlBf,EAAMQ,EAAKF,kBAAvBU,UACCA,EAAIC,mBACQD,EAAIE,QADDT,EAAKU,YAAYH,qDAKvCzC,aAAI+B,SACoB,iBAAXA,IAAqBA,EAAU,CAAEC,KAAMD,IAC3ChC,KAAK+B,QAAQC,gBAGtBc,cAAKd,UACHA,EAAQO,OAAS,OACVvC,KAAK+B,QAAQC,gBAGtBe,aAAIf,UACFA,EAAQO,OAAS,MACVvC,KAAK+B,QAAQC,gBAGtBgB,gBAAOhB,SACiB,iBAAXA,IAAqBA,EAAU,CAAEC,KAAMD,IAClDA,EAAQO,OAAS,SACVvC,KAAK+B,QAAQC,gBAGtBiB,eAAMjB,UACJA,EAAQO,OAAS,QACVvC,KAAK+B,QAAQC,gBAGtBkB,wBAAepC,GACbqC,OAAOC,QAAWtC,sCAGd+B,qBAAYH,cAChBW,QAAQC,IAAIZ,yDCrDhB,IAcaa,EAAUC,EAEVC,EAfX7D,SAAYiC,OAKNhC,EAAM,SAJM,IAAI6D,EAAW,CAC7BxB,IAAKL,EAAO8B,iBAKThE,QAAU,IAAIiE,EAAQ/D,QACtBO,MAAQ,IAAIyD,EAAMhE,QAClBQ,UAAY,IAAIyD,EAAUjE"}